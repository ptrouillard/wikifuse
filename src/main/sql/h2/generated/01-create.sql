--
-- (c) Copyright 2005-2015 JAXIO, http://www.jaxio.com
-- Source code generated by Celerio, a Jaxio product
-- Want to purchase Celerio ? email us at info@jaxio.com
-- Follow us on twitter: @springfuse
-- Documentation: http://www.jaxio.com/documentation/celerio/
-- Template pack-backend-jpa:src/main/sql/h2/01-create.p.vm.sql
--

DROP ALL objects;


-- =================================
-- TABLE article 
-- =================================

CREATE TABLE article (
	article_id ARRAY(2147483647) not null,
	content VARCHAR(2147483647),
	title ARRAY(2147483647),
	parent_id ARRAY(2147483647),
	creator_id ARRAY(2147483647));

CREATE UNIQUE INDEX IF NOT EXISTS pk_article_id ON article (article_id);
CREATE PRIMARY KEY ON article (article_id);

-- =================================
-- TABLE modification 
-- =================================

CREATE TABLE modification (
	modification_id ARRAY(2147483647) not null,
	modifier_id ARRAY(2147483647),
	article_id ARRAY(2147483647),
	modification_date TIMESTAMP);

CREATE UNIQUE INDEX IF NOT EXISTS pk_modification_id ON modification (modification_id);
CREATE PRIMARY KEY ON modification (modification_id);

-- =================================
-- TABLE user 
-- =================================

CREATE TABLE user (
	user_id ARRAY(2147483647) not null,
	login ARRAY(2147483647),
	password ARRAY(2147483647));

CREATE UNIQUE INDEX IF NOT EXISTS pk_user_id ON user (user_id);
CREATE PRIMARY KEY ON user (user_id);
ALTER TABLE article ADD CONSTRAINT FK_CREATOR_ID FOREIGN KEY (creator_id) REFERENCES user (user_id);
ALTER TABLE article ADD CONSTRAINT FK_PARENT_ID FOREIGN KEY (parent_id) REFERENCES article (article_id);
ALTER TABLE modification ADD CONSTRAINT FK_ARTICLE_ID FOREIGN KEY (article_id) REFERENCES article (article_id);
ALTER TABLE modification ADD CONSTRAINT FK_MODIFIER_ID FOREIGN KEY (modifier_id) REFERENCES user (user_id);